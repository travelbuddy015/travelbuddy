import{r as t,c as i,h as s,H as e,g as n}from"./p-b662e034.js";function h(t,i){const s=new Date(t);return s.setDate(s.getDate()+i),s}function o(t){return b(new Date(`${String(g(t)).padStart(4,"0")}-${String(l(t)).padStart(2,"0")}-01`))}function a(t){if(t instanceof Date)return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function r(t){const i=o(t);return i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),i}function l(t){return t.getMonth()+1}function c(t){return h(t,1)}function d(t){const i=new Date(t);return i.setMonth(i.getMonth()+1),i}function u(t){const i=new Date(t);return i.setFullYear(i.getFullYear()+1),i}function v(t){return f(t,1)}function w(t){const i=new Date(t);return i.setMonth(i.getMonth()-1),i}function p(t){const i=new Date(t);return i.setFullYear(i.getFullYear()-1),i}function g(t){return t.getFullYear()}function y(t,i){return!(!t||!i)&&t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()}function b(t){const i=new Date(t);return i.setMinutes(i.getMinutes()+i.getTimezoneOffset()),i}function f(t,i){const s=new Date(t);return s.setDate(s.getDate()-i),s}const k={clearButton:"Clear value",monthSelect:"Select month",nextMonthButton:"Next month",nextYearButton:"Next year",picker:"Choose date",previousMonthButton:"Previous month",previousYearButton:"Previous year",todayButton:"Show today",yearSelect:"Select year"},D=class{constructor(s){t(this,s),this.selectDate=i(this,"selectDate",7),this.changeMonth=i(this,"changeMonth",7),this.disabled=!1,this.disableDate=()=>!1,this.elementClassName="wc-datepicker",this.firstDayOfWeek=0,this.labels=k,this.locale=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US",this.showClearButton=!1,this.showMonthStepper=!0,this.showTodayButton=!1,this.showYearStepper=!1,this.startDate=a(new Date),this.init=()=>{this.currentDate=this.startDate?b(new Date(this.startDate)):new Date,this.updateWeekdays()},this.nextMonth=()=>{this.updateCurrentDate(d(this.currentDate))},this.nextYear=()=>{this.updateCurrentDate(u(this.currentDate))},this.previousMonth=()=>{this.updateCurrentDate(w(this.currentDate))},this.previousYear=()=>{this.updateCurrentDate(p(this.currentDate))},this.showToday=()=>{this.updateCurrentDate(new Date)},this.clear=()=>{this.value=void 0,this.selectDate.emit(void 0)},this.onClick=t=>{if(this.disabled)return;const i=t.target.closest("[data-date]");if(!Boolean(i))return;const s=b(new Date(i.dataset.date));this.updateCurrentDate(s),this.onSelectDate(s)},this.onMonthSelect=t=>{const i=+t.target.value-1,s=new Date(this.currentDate);s.setMonth(i),this.updateCurrentDate(s)},this.onYearSelect=t=>{let i=+t.target.value;const s=t.target;isNaN(i)?(i=(new Date).getFullYear(),s.value=String(i)):i<0?(i=0,s.value=String(i)):i>9999&&(i=9999,s.value=String(i));const e=new Date(this.currentDate);e.setFullYear(i),this.updateCurrentDate(e)},this.onKeyDown=t=>{this.disabled||("ArrowLeft"===t.code?(t.preventDefault(),this.updateCurrentDate(v(this.currentDate),!0)):"ArrowRight"===t.code?(t.preventDefault(),this.updateCurrentDate(c(this.currentDate),!0)):"ArrowUp"===t.code?(t.preventDefault(),this.updateCurrentDate(f(this.currentDate,7),!0)):"ArrowDown"===t.code?(t.preventDefault(),this.updateCurrentDate(h(this.currentDate,7),!0)):"PageUp"===t.code?(t.preventDefault(),this.updateCurrentDate(t.shiftKey?p(this.currentDate):w(this.currentDate),!0)):"PageDown"===t.code?(t.preventDefault(),this.updateCurrentDate(t.shiftKey?u(this.currentDate):d(this.currentDate),!0)):"Home"===t.code?(t.preventDefault(),this.updateCurrentDate(o(this.currentDate),!0)):"End"===t.code?(t.preventDefault(),this.updateCurrentDate(r(this.currentDate),!0)):"Space"!==t.code&&"Enter"!==t.code||(t.preventDefault(),this.onSelectDate(this.currentDate)))},this.onMouseEnter=t=>{if(this.disabled)return;const i=b(new Date(t.target.closest("td").dataset.date));this.hoveredDate=i},this.onMouseLeave=()=>{this.hoveredDate=void 0}}componentWillLoad(){this.init()}watchFirstDayOfWeek(){this.updateWeekdays()}watchLocale(){Boolean(this.locale)||(this.locale=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US"),this.updateWeekdays()}watchRange(){this.value=void 0,this.selectDate.emit(void 0)}watchStartDate(){this.currentDate=this.startDate?b(new Date(this.startDate)):new Date}watchValue(){Boolean(this.value)&&(Array.isArray(this.value)&&this.value.length>=1?this.currentDate=this.value[0]:this.value instanceof Date&&(this.currentDate=this.value))}componentDidRender(){this.moveFocusAfterMonthChanged&&(this.focusDate(this.currentDate),this.moveFocusAfterMonthChanged=!1)}updateWeekdays(){var t,i;this.weekdays=(t=0===this.firstDayOfWeek?7:this.firstDayOfWeek,i=this.locale,new Array(7).fill(void 0).map(((i,s)=>(t+s)%7+1)).map((t=>{const s=b(new Date(`2006-01-0${t}`));return[Intl.DateTimeFormat(i,{weekday:"short"}).format(s),Intl.DateTimeFormat(i,{weekday:"long"}).format(s)]})))}getClassName(t){return Boolean(t)?`${this.elementClassName}__${t}`:this.elementClassName}getCalendarRows(){const t=function(t,i,s){const e=[],n=o(t),h=0===n.getDay()?7:n.getDay(),a=r(t),l=0===a.getDay()?7:a.getDay(),d=1===s?7:s-1,u=[],w=[];{let t=(7-s+h)%7,i=v(n);for(;t>0;)u.push(i),i=v(i),t-=1;u.reverse();let e=(7-l+d)%7,o=c(a);for(;e>0;)w.push(o),o=c(o),e-=1}let p=n;for(;p.getMonth()===t.getMonth();)e.push(p),p=c(p);return[...u,...e,...w]}(this.currentDate,0,0===this.firstDayOfWeek?7:this.firstDayOfWeek),i=[];for(let s=0;s<t.length;s+=7){const e=t.slice(s,s+7);i.push(e)}return i}getTitle(){if(Boolean(this.currentDate))return Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long",year:"numeric"}).format(this.currentDate)}focusDate(t){var i;null===(i=this.el.querySelector(`[data-date="${a(t)}"]`))||void 0===i||i.focus()}updateCurrentDate(t,i){const s=t.getMonth(),e=t.getFullYear();e>9999||e<0||((s!==this.currentDate.getMonth()||e!==this.currentDate.getFullYear())&&(this.changeMonth.emit({month:l(t),year:g(t)}),i&&(this.moveFocusAfterMonthChanged=!0)),this.currentDate=t,i&&this.focusDate(this.currentDate))}onSelectDate(t){var i,s;if(!this.disableDate(t))if(this.isRangeValue(this.value)){const s=void 0===(null===(i=this.value)||void 0===i?void 0:i[0])||2===this.value.length?[t]:[this.value[0],t];2===s.length&&s[0]>s[1]&&s.reverse();const e=void 0===s[1]?[a(s[0])]:[a(s[0]),a(s[1])];this.value=s,this.selectDate.emit(e)}else{if((null===(s=this.value)||void 0===s?void 0:s.getTime())===t.getTime())return;this.value=t,this.selectDate.emit(a(t))}}isRangeValue(t){return this.range}render(){const t=this.showTodayButton||this.showClearButton;return s(e,null,s("div",{"aria-disabled":String(this.disabled),"aria-label":this.labels.picker,class:{[this.getClassName()]:!0,[`${this.getClassName()}--disabled`]:this.disabled},role:"group"},s("div",{class:this.getClassName("header")},s("span",{"aria-atomic":"true","aria-live":"polite",class:"visually-hidden"},this.getTitle()),this.showYearStepper&&s("button",{"aria-label":this.labels.previousYearButton,class:this.getClassName("previous-year-button"),disabled:this.disabled,innerHTML:this.previousYearButtonContent||void 0,onClick:this.previousYear,type:"button"},s("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},s("polyline",{points:"11 17 6 12 11 7"}),s("polyline",{points:"18 17 13 12 18 7"}))),this.showMonthStepper&&s("button",{"aria-label":this.labels.previousMonthButton,class:this.getClassName("previous-month-button"),disabled:this.disabled,innerHTML:this.previousMonthButtonContent||void 0,onClick:this.previousMonth,type:"button"},s("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},s("polyline",{points:"15 18 9 12 15 6"}))),s("span",{class:this.getClassName("current-month")},s("select",{"aria-label":this.labels.monthSelect,class:this.getClassName("month-select"),disabled:this.disabled,name:"month",onChange:this.onMonthSelect},(i=this.locale,new Array(12).fill(void 0).map(((t,s)=>{const e=b(new Date(`2006-${String(s+1).padStart(2,"0")}-01`));return Intl.DateTimeFormat(i,{month:"long"}).format(e)}))).map(((t,i)=>s("option",{key:t,selected:this.currentDate.getMonth()===i,value:i+1},t)))),s("input",{"aria-label":this.labels.yearSelect,class:this.getClassName("year-select"),disabled:this.disabled,max:9999,maxLength:4,min:1,name:"year",onChange:this.onYearSelect,type:"number",value:this.currentDate.getFullYear()})),this.showMonthStepper&&s("button",{"aria-label":this.labels.nextMonthButton,class:this.getClassName("next-month-button"),disabled:this.disabled,innerHTML:this.nextMonthButtonContent||void 0,onClick:this.nextMonth,type:"button"},s("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},s("polyline",{points:"9 18 15 12 9 6"}))),this.showYearStepper&&s("button",{"aria-label":this.labels.nextYearButton,class:this.getClassName("next-year-button"),disabled:this.disabled,innerHTML:this.nextYearButtonContent||void 0,onClick:this.nextYear,type:"button"},s("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},s("polyline",{points:"13 17 18 12 13 7"}),s("polyline",{points:"6 17 11 12 6 7"})))),s("div",{class:this.getClassName("body")},s("table",{class:this.getClassName("calendar"),onKeyDown:this.onKeyDown,role:"grid"},s("thead",{class:this.getClassName("calendar-header")},s("tr",{class:this.getClassName("weekday-row")},this.weekdays.map((t=>s("th",{abbr:t[1],class:this.getClassName("weekday"),key:t[0],scope:"col"},s("span",null,t[0])))))),s("tbody",null,this.getCalendarRows().map((t=>{const i=`row-${t[0].getMonth()}-${t[0].getDate()}`;return s("tr",{class:this.getClassName("calendar-row"),key:i},t.map((t=>{var i,e,n,h,o;const r=y(t,this.currentDate),l=t.getMonth()!==this.currentDate.getMonth(),c=Array.isArray(this.value)?y(t,this.value[0])||y(t,this.value[1]):y(t,this.value),d=!!this.isRangeValue&&(v={from:null===(i=this.value)||void 0===i?void 0:i[0],to:(null===(e=this.value)||void 0===e?void 0:e[1])||this.hoveredDate||this.currentDate},!!((u=t)&&v&&v.from&&v.to)&&u>=(v.from<v.to?v.from:v.to)&&u<=(v.from<v.to?v.to:v.from));var u,v;const w=Boolean(null===(n=this.value)||void 0===n?void 0:n[0])?[null===(h=this.value)||void 0===h?void 0:h[0],(null===(o=this.value)||void 0===o?void 0:o[1])||this.hoveredDate].sort(((t,i)=>t-i)):[],p=this.range&&y(w[0],t),g=this.range&&y(w[1],t),b=y(t,new Date),f=this.disableDate(t),k=`cell-${t.getMonth()}-${t.getDate()}`,D={[this.getClassName("date")]:!0,[this.getClassName("date--current")]:r,[this.getClassName("date--disabled")]:f,[this.getClassName("date--overflowing")]:l,[this.getClassName("date--today")]:b,[this.getClassName("date--selected")]:c,[this.getClassName("date--in-range")]:d,[this.getClassName("date--start")]:p,[this.getClassName("date--end")]:g},m=c?"strong":b?"em":"span";return s("td",{"aria-disabled":String(f),"aria-selected":c?"true":void 0,class:D,"data-date":a(t),key:k,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,role:"gridcell",tabIndex:y(t,this.currentDate)&&!this.disabled?0:-1},s(m,{"aria-hidden":"true"},t.getDate()),s("span",{class:"visually-hidden"},Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long"}).format(t)))})))}))))),t&&s("div",{class:this.getClassName("footer")},this.showTodayButton&&s("button",{class:this.getClassName("today-button"),disabled:this.disabled,innerHTML:this.todayButtonContent||void 0,onClick:this.showToday,type:"button"},this.labels.todayButton),this.showClearButton&&s("button",{class:this.getClassName("clear-button"),disabled:this.disabled,innerHTML:this.clearButtonContent||void 0,onClick:this.clear,type:"button"},this.labels.clearButton))));var i}get el(){return n(this)}static get watchers(){return{firstDayOfWeek:["watchFirstDayOfWeek"],locale:["watchLocale"],range:["watchRange"],startDate:["watchStartDate"],value:["watchValue"]}}};D.style=".visually-hidden.sc-wc-datepicker{position:absolute;overflow:hidden;width:1px;height:1px;white-space:nowrap;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%)}";export{D as wc_datepicker}